<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="css/bulma.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous" />
        <script src="js/vue.js"></script>
        <script src="js/axios.min.js"></script>
        <script src="js/components/api.js"></script>
        <script src="js/components/messages.js"></script>

        <style>
            .is-bordered {
                border: solid 1px black;
            }
        </style>

    </head>
    <body>
        <div id="app"></div>

        <script>
            new Vue({
                mixins: [messages, api],
                el: '#app',
                computed: {
                    showBottomMakePostForm: function(){
                        return this.msgStack.length > 5;
                    }
                },
                mounted: function(){
                    this.loadPosts();
                },
                template: `
                <div class="column">
                    <div class="column panel is-link">
                        <div class="panel-heading">MiniMsg</div>
                        <post-message @refresh="loadPosts"></post-message>
                    </div>
                    <read-messages :messages="msgStack"></read-messages>
                    <div class="column panel is-link" v-if="showBottomMakePostForm">
                        <div class="panel-heading">MiniMsg</div>
                        <post-message @refresh="loadPosts"></post-message>
                    </div>                    
                </div>
                `
            })
        </script>

    </body>
</html>